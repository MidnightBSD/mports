#!/bin/sh
# configuration script for imake

F=$WRKDIR/.config

rm -f $F

echo "/*" >> $F
echo " * The following was generated by FreeBSD imake-6 port." >> $F
echo " */" >> $F
echo "#define HasXdmAuth YES"			>> $F
echo "#define BuildXF86Setup NO"		>> $F
echo "#define BuildDPSLibrary YES"		>> $F
echo "#define HasFreetype2 YES"			>> $F
echo "#define Freetype2Dir ${LOCALBASE}"	>> $F
echo "#define HasExpat YES"			>> $F
echo "#define ExpatDir ${LOCALBASE}"		>> $F
echo "#define HasFontconfig YES"		>> $F
echo "#define FontconfigDir ${PREFIX}"		>> $F
echo "#define HasLibpng YES"			>> $F
echo "#define LibpngDir ${LOCALBASE}"		>> $F
echo "#define NothingOutsideProjectRoot YES"	>> $F

cat $F >> ${WRKDIR}/xc/config/cf/xf86site.def
cat $F >> ${WRKDIR}/xc/config/cf/xorgsite.def

echo "#define ProjectRoot ${PREFIX}" > ${WRKDIR}/xc/config/cf/host.def

cd ${WRKDIR}/xc
touch config/cf/version.def
touch config/cf/date.def
env MAKEFLAGS="CC=${CC}" make Makefile.boot
env MAKEFLAGS="CC=${CC}" make -f xmakefile VerifyOS version.def Makefiles includes
