# $MidnightBSD$
# $FreeBSD: head/devel/tex-kpathsea/Makefile 374714 2014-12-14 16:33:25Z hrs $

PORTNAME=	kpathsea
PORTVERSION=	6.2.0
CATEGORIES=	devel
MASTER_SITES=	ftp://tug.org/historic/systems/texlive/2014/
PKGNAMEPREFIX=	tex-
DISTNAME=	texlive-20140525-source
DIST_SUBDIR=	TeX

MAINTAINER=	ports@MidnightBSD.org
COMMENT=	Path searching library for TeX

LICENSE=	publicdom

USES=		gmake tar:xz libtool
USE_LDCONFIG=	yes
USE_TEX=	yes
EXTRACT_AFTER_ARGS=	${EXTRACT_FILES}
EXTRACT_FILES=	${DISTNAME}/build-aux \
		${DISTNAME}/texk/kpathsea \
		${DISTNAME}/texk/texlive/tl_scripts
WRKSRC=		${WRKDIR}/${DISTNAME}/texk/kpathsea
GNU_CONFIGURE=	yes
INSTALL_TARGET=	install-strip

INFO=		kpathsea

post-install:
	cd ${WRKDIR}/${DISTNAME}/texk/texlive/tl_scripts && \
	    for f in kpsetool kpsewhere; do \
		${INSTALL_SCRIPT} $${f}.sh ${STAGEDIR}${PREFIX}/bin/$$f; \
		${INSTALL_MAN} $${f}.1 \
		    ${STAGEDIR}${MANPREFIX}/man/man1/$${f}.1; \
	    done; \
	    for l in kpsexpand kpsepath; do \
		${LN} -sf kpsetool ${STAGEDIR}${PREFIX}/bin/$$l; \
		${LN} -sf kpsetool.1 ${STAGEDIR}${MANPREFIX}/man/man1/$${l}.1; \
	    done

.include <bsd.port.mk>
