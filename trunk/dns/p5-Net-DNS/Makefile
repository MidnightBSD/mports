# $MidnightBSD$

PORTNAME=	Net-DNS
PORTVERSION=	0.83
PORTREVISION=	1
CATEGORIES=	dns net perl5 ipv6
MASTER_SITES=	CPAN
PKGNAMEPREFIX=	p5-

MAINTAINER=	ports@MidnightBSD.org
COMMENT=	Perl5 interface to the DNS resolver, and dynamic updates

LICENSE=	artistic gpl
LICENSE_COMB=	dual

BUILD_DEPENDS=	p5-Digest-HMAC>=1.01:${PORTSDIR}/security/p5-Digest-HMAC
RUN_DEPENDS:=	${BUILD_DEPENDS}
TEST_DEPENDS=	p5-Digest-BubbleBabble>=0:${PORTSDIR}/security/p5-Digest-BubbleBabble \
		p5-Test-Pod>=0:${PORTSDIR}/devel/p5-Test-Pod

OPTIONS_DEFINE=	IDN IPV6 SSHFP
SSHFP_DESC=	SSH2 Fingerprint support

CONFIGURE_ARGS=	--no-IPv6-tests --no-online-tests
USES=		perl5
USE_PERL5=	configure
PERL_CONFIGURE=	yes

IDN_BUILD_DEPENDS=	p5-Net-LibIDN>=0:${PORTSDIR}/dns/p5-Net-LibIDN
IDN_RUN_DEPENDS=	p5-Net-LibIDN>=0:${PORTSDIR}/dns/p5-Net-LibIDN
IPV6_BUILD_DEPENDS=	p5-IO-Socket-INET6>=0:${PORTSDIR}/net/p5-IO-Socket-INET6
IPV6_RUN_DEPENDS=	p5-IO-Socket-INET6>=0:${PORTSDIR}/net/p5-IO-Socket-INET6
SSHFP_BUILD_DEPENDS=	p5-Digest-BubbleBabble>=0:${PORTSDIR}/security/p5-Digest-BubbleBabble
SSHFP_RUN_DEPENDS=	p5-Digest-BubbleBabble>=0:${PORTSDIR}/security/p5-Digest-BubbleBabble

post-install:
	${CHMOD} u+w ${PREFIX}/${SITE_ARCH_REL}/auto/Net/DNS/DNS.so
	${STRIP_CMD} ${PREFIX}/${SITE_ARCH_REL}/auto/Net/DNS/DNS.so
	${CHMOD} u-w ${PREFIX}/${SITE_ARCH_REL}/auto/Net/DNS/DNS.so

.include <bsd.port.mk>
