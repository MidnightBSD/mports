--- configure.orig	Wed Jul 26 16:38:04 2006
+++ configure	Wed Jul 26 16:38:04 2006
@@ -24860,8 +24860,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${prefix}/share/locale"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${prefix}/share/locale"`
   GNOMELOCALEDIR="$ac_define_dir"
 
 
@@ -27066,8 +27065,8 @@
 
 	   ;;
        # list of supported OS cores that do not use libapm
-       i386-*-freebsd*|*-*-netbsd*|*-*-openbsd*|*-*kfreebsd*-gnu)
-          if  -n "${OS_SYS}" ; then
+       i386-*-freebsd*|amd64-*-freebsd*|*-*-netbsd*|*-*-openbsd*|*-*kfreebsd*-gnu)
+          if test -n "${OS_SYS}" ; then
 	       ACPIINC="-I${OS_SYS}"
 	   else
 	       ACPIINC="-I/usr/src/sys"
@@ -28145,6 +28144,9 @@
       *linux*)
          build_cpufreq_applet=yes
 	 ;;
+      i386-*-freebsd*|amd64-*-freebsd*)
+         build_cpufreq_applet=yes
+	 ;;
       *)
          { echo "$as_me:$LINENO: WARNING: ${host} is not supported by cpufreq applet, not building" >&5
 echo "$as_me: WARNING: ${host} is not supported by cpufreq applet, not building" >&2;}
@@ -28752,7 +28754,7 @@
 ACLOCAL_AMFLAGS="\${ACLOCAL_FLAGS}"
 
 
-iconsdir="${datadir}/icons"
+iconsdir="${prefix}/share/icons"
 
 pixmapsdir="${datadir}/pixmaps"
 
@@ -28764,8 +28766,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${iconsdir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${iconsdir}"`
   GNOME_ICONDIR="$ac_define_dir"
 
 
@@ -28777,8 +28778,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${pixmapsdir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${pixmapsdir}"`
   GNOME_PIXMAPSDIR="$ac_define_dir"
 
 
@@ -28790,8 +28790,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${gladedir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${gladedir}"`
   GNOME_GLADEDIR="$ac_define_dir"
 
 
@@ -28803,8 +28802,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${datadir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${datadir}"`
   DATADIR="$ac_define_dir"
 
 
@@ -28816,8 +28814,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${sysconfdir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${sysconfdir}"`
   SYSCONFDIR="$ac_define_dir"
 
 
@@ -28829,8 +28826,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"${libdir}"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "${libdir}"`
   LIBDIR="$ac_define_dir"
 
 
@@ -28842,8 +28838,7 @@
 
   test "x$prefix" = xNONE && prefix="$ac_default_prefix"
   test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
-  ac_define_dir=`eval echo $"$prefix"`
-  ac_define_dir=`eval echo $ac_define_dir`
+  ac_define_dir=`eval echo "$prefix"`
   PREFIX="$ac_define_dir"
 
 
