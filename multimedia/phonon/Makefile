PORTNAME=	phonon
DISTVERSION=	4.12.0
CATEGORIES=	multimedia kde
MASTER_SITES=	KDE/stable/${PORTNAME}/${DISTVERSION}
DIST_SUBDIR=	KDE/phonon
PKGNAMESUFFIX=	-qt5

MAINTAINER=	ports@MidnightBSD.org
COMMENT=	KDE multimedia framework
WWW=		https://userbase.kde.org/Phonon

LICENSE=	lgpl2.1+
LICENSE_FILE=	${WRKSRC}/COPYING.LIB

USES=		cmake compiler:c++11-lang kde:5 pathfix qt:5 tar:xz
CMAKE_ON=	PHONON_BUILD_QT5 \
		PHONON_NO_PLATFORMPLUGIN
CMAKE_OFF=	PHONON_BUILD_DESIGNER_PLUGIN \
		PHONON_BUILD_QT6
USE_LDCONFIG=	yes
USE_KDE=	ecm:build
USE_QT=		core gui widgets \
		buildtools:build qmake:build

PLIST_SUB=	SHLIB_VER=${DISTVERSION}

OPTIONS_DEFINE=	PULSEAUDIO

PULSEAUDIO_LIB_DEPENDS=		libpulse.so:audio/pulseaudio
PULSEAUDIO_USES=		gnome
PULSEAUDIO_USE=			GNOME=glib20
PULSEAUDIO_CMAKE_BOOL_OFF=	CMAKE_DISABLE_FIND_PACKAGE_PulseAudio

.include <bsd.port.mk>
