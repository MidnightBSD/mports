# Created by: Olivier Duchateau
# $FreeBSD: head/devel/dee/Makefile 387491 2015-05-26 16:47:02Z antoine $
# $MidnightBSD$

PORTNAME=	dee
PORTVERSION=	1.2.7
CATEGORIES=	devel
MASTER_SITES=	https://launchpadlibrarian.net/151383425/ \
	https://launchpad.net/${PORTNAME}/1.0/${PORTVERSION}/+download/

MAINTAINER=	ports@MidnightBSD.org
COMMENT=	Model to synchronize multiple instances over DBus

LICENSE=	gpl3

BUILD_DEPENDS=	vapigen:${PORTSDIR}/lang/vala
LIB_DEPENDS=	libicutu.so:${PORTSDIR}/devel/icu

USES=		gmake libtool pkgconfig pathfix python
GNU_CONFIGURE=	yes
USE_GNOME=	glib20 introspection:build
USE_LDCONFIG=	yes

CONFIGURE_ARGS=	--disable-gtk-doc-html \
	--disable-tests \
	--disable-gcov \
	--enable-introspection=yes \
	--without-html-dir
CPPFLAGS+=	-I${LOCALBASE}/include
LDFLAGS+=	-L${LOCALBASE}/lib

.include <bsd.port.pre.mk>

.if ${PYTHON_REL} >= 3000
USE_GNOME+=	py3gobject3
.else
USE_GNOME+=	pygobject3
.endif

post-patch:
	${REINPLACE_CMD} -e 's| -Wempty-body||' ${WRKSRC}/configure

.include <bsd.port.post.mk>
