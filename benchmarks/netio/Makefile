# $MidnightBSD$
# $FreeBSD: ports/benchmarks/netio/Makefile,v 1.5 2006/09/02 12:07:20 arved Exp $

PORTNAME=	netio
PORTVERSION=	1.26
PORTREVISION=	1
CATEGORIES=	benchmarks net ipv6
MASTER_SITES=	${MASTER_SITE_FREEBSD_LOCAL}
MASTER_SITE_SUBDIR=	arved
DISTNAME=	netio126

MAINTAINER=	ports@MidnightBSD.org
COMMENT=	Network benchmark

LICENSE=	netio
LICENSE_NAME=	netio license
LICENSE_FILE=	${WRKSRC}/netio.doc
LICENSE_PERMS=	dist-mirror pkg-mirror

RESTRICTED=	No commercial use

WRKSRC=		${WRKDIR}
USES=		gmake zip
PLIST_FILES=	bin/netio

CFLAGS+=	-DUNIX
LIBS+=		-pthread
MAKE_ENV+=	OUT=-o

OPTIONS_DEFINE=	IPV6
IPV6_PLIST_FILES=	bin/netio6

.include <bsd.mport.options.mk>

do-build:
	@(cd ${WRKSRC} && \
	${SETENV} ${MAKE_ENV} O=.o CFLAGS="${CFLAGS}" ${MAKE_CMD} all)
.if ${PORT_OPTIONS:MIPV6}
	@(cd ${WRKSRC} && \
	${MAKE_ENV} O=.6o X=6 CFLAGS="${CFLAGS} -DUSE_IPV6" ${MAKE_CMD} all)
.endif

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/netio ${STAGEDIR}${PREFIX}/bin
.if ${PORT_OPTIONS:MIPV6}
	${INSTALL_PROGRAM} ${WRKSRC}/netio6 ${STAGEDIR}${PREFIX}/bin
.endif

.include <bsd.port.mk>
